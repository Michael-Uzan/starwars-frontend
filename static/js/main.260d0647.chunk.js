(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(27),s=n.n(c),i=(n(39),n(40),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),o=n(9),u=n(2),l=n.n(u),p=n(4),d=n(8),f=n(14),j=n(3),h=n.p+"static/media/github-logo.27e6971f.png",m=n(0);function v(){return Object(m.jsxs)("footer",{className:"main-footer full",children:[Object(m.jsxs)("div",{className:"footer-logo flex direction-col align-center",children:[Object(m.jsx)("p",{children:"\xa9 Star Wars by Michael Uzan"}),Object(m.jsx)("img",{src:"https://www.citypng.com/public/uploads/preview/-51608495204iyvpoqgita.png"})]}),Object(m.jsx)("div",{className:"footer-desc",children:Object(m.jsx)("ul",{className:"social-links clean-list flex direction-row justify-center",children:Object(m.jsx)("li",{children:Object(m.jsxs)("a",{target:"_blank",href:"https://github.com/Michael-Uzan/starwars-frontend",children:[Object(m.jsx)("p",{children:"See Code on GitHub Here: "}),Object(m.jsx)("img",{src:h})]})})})})]})}var b=n(13),x=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=Object(r.useState)(e),a=Object(d.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){t(c)}),[c]);var i=function(e){var t,n=e.target,r=n.name;switch(n.type){case"number":t=+n.value;break;case"checkbox":t=n.checked;break;default:t=n.value}s((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(b.a)({},r,t))}))};return[c,i,s]}({txt:"",isFavorite:!1},e.onChangeFilter),n=Object(d.a)(t,2),a=n[0],c=n[1],s=a.txt,i=a.isFavorite;return Object(m.jsxs)("header",{className:" main-header full flex direction-col ",children:[Object(m.jsx)("div",{className:"top-header flex",children:Object(m.jsx)("img",{src:"https://logodownload.org/wp-content/uploads/2015/12/star-wars-logo.png"})}),Object(m.jsxs)("form",{className:"filter flex align-center direction-row ",children:[Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("label",{htmlFor:"txt",children:"Movie title: "}),Object(m.jsx)("input",{value:s,type:"text",id:"txt",name:"txt",onChange:c,placeholder:"Search movie"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{value:i,type:"checkbox",id:"isFavorite",name:"isFavorite",onChange:c}),Object(m.jsx)("label",{htmlFor:"isFavorite",children:"Only favorite"})]})]})]})},g=n.p+"static/media/like-on.429596b9.png",O=function(e){var t=e.movie;return Object(m.jsx)("section",{className:"movie-preview",children:Object(m.jsxs)(f.b,{activeClassName:"active",exact:!0,to:"/movie/".concat(t._id),children:[Object(m.jsx)("div",{children:t.title}),t.isFavorite&&Object(m.jsx)("img",{src:g})]})})},w=function(e){var t=e.movies;return Object(m.jsx)("nav",{className:"nav-movie-list",children:t.map((function(e){return Object(m.jsx)(O,{movie:e},e._id)}))})},y=n.p+"static/media/bars-loader.ef2c6578.svg";function k(){return Object(m.jsx)("div",{className:"loader flex align-center justify-center",children:Object(m.jsx)("img",{src:y,alt:"loading..."})})}var N=function(e){var t=e.movies;return t?Object(m.jsxs)("aside",{className:"side-bar",children:[Object(m.jsx)(w,{movies:t}),!t.length&&Object(m.jsx)("div",{children:"Sorry no results..."})]}):Object(m.jsx)(k,{})},S=n(30),M=n(31),F=n(34),C=n(33),E={on:function(e,t){var n=function(e){var n=e.detail;t(n)};return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))},showSuccessMsg:function(e){I(e,"success")},showErrorMsg:function(e){I(e,"danger")}};function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";E.emit("show-user-msg",{txt:e,type:t}),console.log("User MSG!!")}window.myBus=E,window.showUserMsg=I;var _=function(e){Object(F.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).removeEvent=void 0,e.state={msg:null},e}return Object(M.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=E.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),4e3)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(m.jsx)(m.Fragment,{});var t=this.state.msg.type||"";return Object(m.jsxs)("section",{className:"user-msg  flex direction-row align-center ".concat(t),children:[Object(m.jsx)("div",{className:" txt-msg flex direction-row align-center",children:this.state.msg.txt}),Object(m.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"})]})}}]),n}(a.a.Component),J=function(){return Object(m.jsxs)("section",{className:"home tac",children:[Object(m.jsx)("h1",{children:"Welcome to Star Wars!!"}),Object(m.jsx)("h3",{children:"Choose your favorite movie"})]})},L=n(32),A=n.n(L),B={query:D,get:function(e,t){return T.apply(this,arguments)},post:function(e,t){return R.apply(this,arguments)},put:function(e,t){return U.apply(this,arguments)},remove:function(e,t){return W.apply(this,arguments)}};function D(e){return z.apply(this,arguments)}function z(){return z=Object(p.a)(l.a.mark((function e(t){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:200,r=JSON.parse(localStorage.getItem(t)||"null"),e.abrupt("return",new Promise((function(e){return setTimeout(e,n,r)})));case 3:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function T(){return(T=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:if(r=e.sent,a=r.find((function(e){return(null===e||void 0===e?void 0:e._id)===t})),console.log("entity",a),a){e.next=7;break}throw new Error("Cannot get, Item ".concat(t," of type: ").concat(n," does not exist"));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(p.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(Object(o.a)({},t),{},{_id:q()}),e.next=3,D(n);case 3:return(r=e.sent).push(t),P(r,n),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:if(r=e.sent,!((a=r.findIndex((function(e){return e._id===t._id})))<0)){e.next=6;break}throw new Error('Cannot update item, id "'.concat(t.id,'" was not found '));case 6:return r[a]=t,P(r,n),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:if(r=e.sent,-1===(a=r.findIndex((function(e){return e._id===t})))){e.next=8;break}r.splice(a,1),e.next=9;break;case 8:throw new Error('Cannot remove, item id "'.concat(t,'"" of type: ').concat(n," does not exist"));case 9:return P(r,n),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){localStorage.setItem(t,JSON.stringify(e))}function q(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return+t}var H={save:function(e,t){localStorage[e]=JSON.stringify(t)},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage[e]||t;return JSON.parse(n)}};var G={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};var Y={getMovies:function(e){return Z.apply(this,arguments)},getById:function(e){return ee.apply(this,arguments)},updateMovie:function(e){return te.apply(this,arguments)}},Q="starwarsDB",X="https://swapi.dev/api/films/";function Z(){return(Z=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.query(Q);case 2:if(e.t0=e.sent,e.t0){e.next=7;break}return e.next=6,K();case 6:e.t0=e.sent;case 7:return n=e.t0,r=JSON.parse(JSON.stringify(n)),console.log("filterBy",t),t&&(a=t.isFavorite,c=t.txt,s=new RegExp(c,"i"),r=r.filter((function(e){return s.test(e.title)&&(!a||e.isFavorite)}))),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get(X);case 2:return t=e.sent,n=t.data.results.map((function(e){return{_id:G.makeId(),isFavorite:!1,title:e.title,director:e.director,releaseDate:e.release_date,details:e.opening_crawl,img:$(e.title)}})),H.save(Q,n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){switch(e){case"A New Hope":default:return"https://images-na.ssl-images-amazon.com/images/I/81aA7hEEykL.jpg";case"The Empire Strikes Back":return"https://images-na.ssl-images-amazon.com/images/I/91eOgodm4nL.jpg";case"Return of the Jedi":return"https://images-na.ssl-images-amazon.com/images/I/81g8vEs4ixL.jpg";case"The Phantom Menace":return"https://m.media-amazon.com/images/I/71rFhtOvY+L._SL1372_.jpg";case"Attack of the Clones":return"https://upload.wikimedia.org/wikipedia/en/thumb/5/5d/Attackoftheclones_novel.jpg/220px-Attackoftheclones_novel.jpg";case"Revenge of the Sith":return"https://i.ebayimg.com/images/g/J-cAAMXQMmJROYZf/s-l500.jpg"}}function ee(){return(ee=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get(t,Q);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("error get an item",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function te(){return(te=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.put(t,Q);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n.p+"static/media/like.22cafb25.png",re=function(e){var t=e.onLikeClick,n=e.isLike;return Object(m.jsx)("section",{className:"like-button",children:Object(m.jsx)("button",{onClick:function(){return t()},children:Object(m.jsx)("img",{className:"heart",src:n?g:ne})})})},ae=function(e){var t=e.match,n=e.loadMovies,a=e.history,c=Object(r.useState)(null),s=Object(d.a)(c,2),i=s[0],o=s[1];Object(r.useEffect)((function(){u()}),[t.params.movieId]);var u=function(){var e=Object(p.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.movieId,e.next=3,Y.getById(n);case 3:r=e.sent,console.log("movie",r),r?o(r):a.push("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=JSON.parse(JSON.stringify(i))).isFavorite=!t.isFavorite,e.next=4,Y.updateMovie(t);case 4:r=e.sent,o(r),n();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(m.jsxs)("section",{className:"movie-details tac ",children:[Object(m.jsx)("div",{className:"flex space-around",children:Object(m.jsxs)("div",{className:"title flex align-center",children:[Object(m.jsx)("h1",{children:i.title}),Object(m.jsx)(re,{isLike:i.isFavorite,onLikeClick:f})]})}),Object(m.jsxs)("section",{className:"main-details flex",children:[Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:i.img})}),Object(m.jsxs)("div",{className:"tac",children:[Object(m.jsxs)("h3",{children:["Director: ",i.director]}),Object(m.jsxs)("h4",{children:["Release Date: ",i.releaseDate]}),Object(m.jsx)("p",{children:i.details})]})]})]}):Object(m.jsx)(k,{})};var ce=function(){var e=Object(r.useState)(null),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(d.a)(c,2),i=s[0],u=s[1];Object(r.useEffect)((function(){E.showSuccessMsg("Welcome!!!"),h(),console.log("init")}),[]);var h=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.getMovies(i);case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),e.next=3,Y.getMovies(t);case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"main-app",children:Object(m.jsxs)(f.a,{children:[Object(m.jsx)(_,{}),Object(m.jsx)(x,{onChangeFilter:b}),Object(m.jsxs)("main",{className:"main-content main-container",children:[Object(m.jsx)(N,{movies:n}),Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{path:"/movie/:movieId",render:function(e){return Object(m.jsx)(ae,Object(o.a)(Object(o.a)({},e),{},{loadMovies:h,authed:!0}))}}),Object(m.jsx)(j.a,{path:"/",component:J})]})]}),Object(m.jsx)(v,{})]})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(ce,{})}),document.getElementById("root")),i()}},[[69,1,2]]]);
//# sourceMappingURL=main.260d0647.chunk.js.map