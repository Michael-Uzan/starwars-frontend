(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(26),s=n.n(c),i=(n(38),n(39),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))}),o=n(12),u=n(3),p=n(1);function l(){return Object(p.jsx)("footer",{className:"footer full flex justify-center",children:Object(p.jsx)("p",{children:"\xa9 coffee rights"})})}var f=n(2),m=n.n(f),h=n(4),d=n(11),v=n(27),j=n.n(v),g=n(17),b={query:x,get:function(t,e){return O.apply(this,arguments)},post:function(t,e){return y.apply(this,arguments)},put:function(t,e){return k.apply(this,arguments)},remove:function(t,e){return S.apply(this,arguments)}};function x(t){return w.apply(this,arguments)}function w(){return w=Object(h.a)(m.a.mark((function t(e){var n,r,a=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:1100,r=JSON.parse(localStorage.getItem(e)||"null"),t.abrupt("return",new Promise((function(t){return setTimeout(t,n,r)})));case 3:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function O(){return(O=Object(h.a)(m.a.mark((function t(e,n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(n);case 2:if(r=t.sent,a=r.find((function(t){return t._id===e}))){t.next=6;break}throw new Error("Cannot get, Item ".concat(e," of type: ").concat(n," does not exist"));case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Object(h.a)(m.a.mark((function t(e,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(g.a)(Object(g.a)({},e),{},{_id:I()}),t.next=3,x(n);case 3:return(r=t.sent).push(e),E(r,n),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(h.a)(m.a.mark((function t(e,n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(n);case 2:if(r=t.sent,!((a=r.findIndex((function(t){return t._id===e._id})))<0)){t.next=6;break}throw new Error('Cannot update item, id "'.concat(e.id,'" was not found '));case 6:return r[a]=e,E(r,n),t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(h.a)(m.a.mark((function t(e,n){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(n);case 2:if(r=t.sent,-1===(a=r.findIndex((function(t){return t._id===e})))){t.next=8;break}r.splice(a,1),t.next=9;break;case 8:throw new Error('Cannot remove, item id "'.concat(e,'"" of type: ').concat(n," does not exist"));case 9:return E(r,n),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e){localStorage.setItem(e,JSON.stringify(t))}function I(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e="",n="0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return+e}var N={save:function(t,e){localStorage[t]=JSON.stringify(e)},load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage[t]||e;return JSON.parse(n)}};var M={makeId:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}};var _={getMovies:function(){return A.apply(this,arguments)},getById:function(t){return J.apply(this,arguments)}},C="starwarsDB",L="https://swapi.dev/api/films/";function A(){return(A=Object(h.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.query(C);case 2:if(t.t0=t.sent,t.t0){t.next=7;break}return t.next=6,B();case 6:t.t0=t.sent;case 7:return e=t.t0,t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(){return D.apply(this,arguments)}function D(){return(D=Object(h.a)(m.a.mark((function t(){var e,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get(L);case 2:return e=t.sent,n=e.data.results.map((function(t){return{_id:M.makeId(),isFavorite:!1,title:t.title,director:t.director,releaseDate:t.release_date,details:t.opening_crawl,img:F(t.title)}})),N.save(C,n),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t){switch(t){case"A New Hope":default:return"https://images-na.ssl-images-amazon.com/images/I/81aA7hEEykL.jpg";case"The Empire Strikes Back":return"https://images-na.ssl-images-amazon.com/images/I/91eOgodm4nL.jpg";case"Return of the Jedi":return"https://images-na.ssl-images-amazon.com/images/I/81g8vEs4ixL.jpg";case"The Phantom Menace":return"https://m.media-amazon.com/images/I/71rFhtOvY+L._SL1372_.jpg";case"Attack of the Clones":return"https://upload.wikimedia.org/wikipedia/en/thumb/5/5d/Attackoftheclones_novel.jpg/220px-Attackoftheclones_novel.jpg";case"Revenge of the Sith":return"https://www.michigansportszone.com/wp-content/uploads/2021/10/Ep3DVD.jpg"}}function J(){return(J=Object(h.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get(e,C);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var T=function(t){var e=t.movie;return Object(p.jsx)("section",{className:"film-preview",children:Object(p.jsx)(o.b,{activeClassName:"active",exact:!0,to:"/movie/".concat(e._id),children:e.title})})},z=function(t){var e=t.movies;return Object(p.jsx)("nav",{className:"nav-movie-list",children:e.map((function(t){return Object(p.jsx)(T,{movie:t},t._id)}))})},P=n.p+"static/media/bars-loader.8e56973c.svg";function U(){return Object(p.jsx)("div",{className:"loader flex align-center justify-center",children:Object(p.jsx)("img",{src:P,alt:"loading..."})})}var q=function(){var t=Object(r.useState)(null),e=Object(d.a)(t,2),n=e[0],a=e[1];Object(r.useEffect)((function(){c()}),[]);var c=function(){var t=Object(h.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getMovies();case 2:e=t.sent,a(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n?Object(p.jsx)("aside",{className:"side-bar",children:Object(p.jsx)(z,{movies:n})}):Object(p.jsx)(U,{})},R=n(30),W=n(31),G=n(33),H=n(32),V={on:function(t,e){var n=function(t){var n=t.detail;e(n)};return window.addEventListener(t,n),function(){window.removeEventListener(t,n)}},emit:function(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))},showSuccessMsg:function(t){Y(t,"success")},showErrorMsg:function(t){Y(t,"danger")}};function Y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";V.emit("show-user-msg",{txt:t,type:e}),console.log("User MSG!!")}window.myBus=V,window.showUserMsg=Y;var K=function(t){Object(G.a)(n,t);var e=Object(H.a)(n);function n(){var t;Object(R.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).removeEvent=void 0,t.state={msg:null},t}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.removeEvent=V.on("show-user-msg",(function(e){t.setState({msg:e}),setTimeout((function(){t.setState({msg:null})}),1500)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var t=this;if(!this.state.msg)return Object(p.jsx)(p.Fragment,{});var e=this.state.msg.type||"";return Object(p.jsxs)("section",{className:"user-msg  flex direction-row align-center ".concat(e),children:[Object(p.jsx)("div",{className:" txt-msg flex direction-row align-center",children:this.state.msg.txt}),Object(p.jsx)("button",{onClick:function(){t.setState({msg:null})},children:"x"})]})}}]),n}(a.a.Component),Q=[{path:"/movie/:movieId",component:function(t){var e=t.match,n=Object(r.useState)(null),a=Object(d.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){i()}),[e.params.movieId]);var i=function(){var t=Object(h.a)(m.a.mark((function t(){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params.movieId,t.next=3,_.getById(n);case 3:r=t.sent,s(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?Object(p.jsxs)("section",{className:"movie-details",children:[Object(p.jsx)("img",{src:c.img}),Object(p.jsx)("h2",{children:c.title}),Object(p.jsx)("h3",{children:c.director}),Object(p.jsx)("h4",{children:c.releaseDate}),Object(p.jsx)("p",{children:c.details})]}):Object(p.jsx)(U,{})}},{path:"/",component:function(){return Object(p.jsx)("section",{className:"home tac",children:Object(p.jsx)("img",{src:"https://media.urbanpost.it/wp-content/uploads/2015/08/Star-Wars.jpg"})})}}],X=Q;var Z=function(){return Object(p.jsx)("div",{className:"main-container",children:Object(p.jsxs)(o.a,{children:[Object(p.jsx)(K,{}),Object(p.jsx)(q,{}),Object(p.jsx)("main",{children:Object(p.jsx)(u.c,{children:X.map((function(t){return Object(p.jsx)(u.a,{component:t.component,path:t.path},t.path)}))})}),Object(p.jsx)(l,{})]})})};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(Z,{})}),document.getElementById("root")),i()}},[[68,1,2]]]);
//# sourceMappingURL=main.5d01421f.chunk.js.map